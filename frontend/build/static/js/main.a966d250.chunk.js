(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{129:function(e,t,r){},130:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(1),c=r.n(n),s=r(24),i=r.n(s),o=r(136),d=r(16),l=r(19),j=r(146),u=r(137),b=r(142),h=r(15),p=r(8),O=r(7),x=r(9),m=r.n(x),f=r(12),g=r(13),y=r.n(g),v="LOGIN_USER_REQUEST",E="LOGIN_USER_SUCCESS",S="LOGIN_USER_FAIL",k="USER_LOGOUT",C="REGISTER_USER_REQUEST",I="REGISTER_USER_SUCCESS",w="REGISTER_USER_FAIL",_="DETAILS_USER_REQUEST",T="DETAILS_USER_SUCCESS",R="DETAILS_USER_FAIL",P="DETAILS_UPDATE_REQUESTED",L="DETAILS_UPDATE_SUCCESS",N="DETAILS_UPDATE_FAIL",A="LIST_USER_REQUEST",D="LIST_USER_SUCCESS",U="LIST_USER_FAIL",F="LIST_USER_RESET",M="DELETE_USER_REQUEST",G="DELETE_USER_SUCCESS",B="DELETE_USER_FAIL",q="GET_USER_REQUEST",Q="GET_USER_SUCCESS",$="GET_USER_FAIL",z="UPDATE_ADMIN_USER_REQUEST",Y="UPDATE_ADMIN_USER_SUCCESS",V="UPDATE_ADMIN_USER_FAIL",H=r(10),J=r(144),W=r(135),X=r(83),K=r(84),Z=function(e){var t=e.history,r=Object(n.useState)(""),c=Object(H.a)(r,2),s=c[0],i=c[1];return Object(a.jsx)(J.a,{onSubmit:function(e){e.preventDefault(),s.trim()?t.push("/search/".concat(s)):t.push("/")},children:Object(a.jsxs)(W.a,{className:"d-flex justify-content-between my-sm-3 my-3",children:[Object(a.jsx)(X.a,{xs:9,md:10,children:Object(a.jsx)(J.a.Control,{type:"text",name:"q",onChange:function(e){return i(e.target.value)},placeholder:"search in products ... ",className:"mr-md-2 mr-sm-1 w-100"})}),Object(a.jsx)(X.a,{xs:3,md:2,className:"text-right",children:Object(a.jsx)(K.a,{type:"submit",variant:"outline-success",className:"px-3 btn",children:"Search"})})]})})},ee=function(){var e=Object(p.b)(),t=Object(p.c)((function(e){return e.user})).user;return Object(a.jsx)("header",{children:Object(a.jsx)(j.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0,children:Object(a.jsxs)(o.a,{children:[Object(a.jsx)(h.LinkContainer,{to:"/",children:Object(a.jsx)(j.a.Brand,{children:"ProShop"})}),Object(a.jsx)(j.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(j.a.Collapse,{id:"basic-navbar-nav ",children:[Object(a.jsx)(l.d,{render:function(e){var t=e.history;return Object(a.jsx)(Z,{history:t})}}),Object(a.jsxs)(u.a,{className:"ml-auto",children:[Object(a.jsx)(h.LinkContainer,{to:"/cart",children:Object(a.jsxs)(u.a.Link,{children:[Object(a.jsx)("i",{className:"fas fa-shopping-cart"})," Cart"]})}),t._id?Object(a.jsxs)(c.a.Fragment,{children:[t.isAdmin&&Object(a.jsxs)(b.a,{title:"Admin",id:"/admin/users",children:[Object(a.jsx)(h.LinkContainer,{to:"/admin/users",children:Object(a.jsx)(b.a.Item,{children:"Users"})}),Object(a.jsx)(h.LinkContainer,{to:"/admin/products",children:Object(a.jsx)(b.a.Item,{children:"Products"})}),Object(a.jsx)(h.LinkContainer,{to:"/admin/orders",children:Object(a.jsx)(b.a.Item,{children:"Orders"})})]}),Object(a.jsxs)(b.a,{title:t.name,id:"username",children:[Object(a.jsx)(h.LinkContainer,{to:"/profile",children:Object(a.jsx)(b.a.Item,{children:"Profile"})}),Object(a.jsx)(b.a.Item,{onClick:function(){e((function(e){localStorage.removeItem("userInfo"),e({type:k}),e({type:F})}))},children:"Logout"})]})]}):Object(a.jsx)(h.LinkContainer,{to:"/login",children:Object(a.jsxs)(u.a.Link,{children:[Object(a.jsx)("i",{className:"fas fa-user"})," Sign In"]})})]})]})]})})})},te=function(){return Object(a.jsx)("footer",{className:"bg-dark text-white",children:Object(a.jsxs)(o.a,{children:[Object(a.jsx)(W.a,{children:Object(a.jsx)(X.a,{className:"text-center py-3",children:"Copyright \xa9 Shop"})}),Object(a.jsx)(W.a,{children:Object(a.jsxs)(X.a,{className:"text-center my-3 text-white",children:["this is done my Mohamad Hasan, email:","  ",Object(a.jsx)("em",{children:Object(a.jsx)("a",{href:"mailto:mo-hasan89@hotmail.com",style:{textDecoration:"none",all:"unset",cursor:"pointer"},children:"mo-hasan89@hotmail.com"})})]})})]})})},re=r(34),ae=r(147),ne=function(e){var t=e.value,r=e.text,n=e.color;return Object(a.jsxs)("div",{className:"rating",children:[Object(a.jsx)("span",{children:Object(a.jsx)("i",{style:{color:n},className:t>=1?"fas fa-star":t>.5?"fas fa-star-half-alt":"far fa-star"})}),Object(a.jsx)("span",{children:Object(a.jsx)("i",{style:{color:n},className:t>=2?"fas fa-star":t>1.5?"fas fa-star-half-alt":"far fa-star"})}),Object(a.jsx)("span",{children:Object(a.jsx)("i",{style:{color:n},className:t>=3?"fas fa-star":t>2.5?"fas fa-star-half-alt":"far fa-star"})}),Object(a.jsx)("span",{children:Object(a.jsx)("i",{style:{color:n},className:t>=4?"fas fa-star":t>3.5?"fas fa-star-half-alt":"far fa-star"})}),Object(a.jsx)("span",{children:Object(a.jsx)("i",{style:{color:n},className:t>=5?"fas fa-star":t>4.5?"fas fa-star-half-alt":"far fa-star"})}),Object(a.jsx)("span",{children:r&&" "+r})]})};ne.defaultProps={color:"#f8e825"};var ce=ne,se=function(e){var t=e.product;return Object(a.jsxs)(ae.a,{className:"my-2 p-3 rounded text-center product-card ",children:[Object(a.jsx)(d.Link,{to:"/product/".concat(t._id),children:Object(a.jsx)(ae.a.Img,{className:"h-100",src:t.image,variant:"top"})}),Object(a.jsxs)(ae.a.Body,{children:[Object(a.jsx)(d.Link,{style:{textDecoration:"none",color:"inherit"},to:"/product/".concat(t._id),children:Object(a.jsx)(ae.a.Title,{as:"div",variant:"top",children:Object(a.jsx)("strong",{children:t.name})})}),Object(a.jsx)(ae.a.Text,{as:"div",children:Object(a.jsx)("div",{className:"my-3",children:Object(a.jsx)(ce,{value:t.rating,text:"".concat(t.numReviews," reviews")})})}),Object(a.jsxs)(ae.a.Text,{as:"h3",children:["$",t.Price.toFixed(2)]})]})]})},ie=r(148),oe="PRODUCT_LIST_REQUEST",de="PRODUCT_LIST_SUCCESS",le="PRODCUT_LIST_FAIL",je="PRODUCT_DETAILS_REQUEST",ue="PRODUCT_DETAILS_SUCCESS",be="PRODCUT_DETAILS_FAIL",he="PRODUCT_DELETE_REQUEST",pe="PRODUCT_DELETE_SUCCESS",Oe="PRODCUT_DELETE_FAIL",xe="PRODCUT_DELETE_RESET",me="PRODUCT_CREATE_REQUEST",fe="PRODUCT_CREATE_SUCCESS",ge="PRODCUT_CREATE_FAIL",ye="PRODCUT_CREATE_RESET",ve="PRODUCT_EDIT_REQUEST",Ee="PRODUCT_EDIT_SUCCESS",Se="PRODCUT_EDIT_FAIL",ke="PRODCUT_EDIT_RESET",Ce="PRODUCT_REVIEW_REQUEST",Ie="PRODUCT_REVIEW_SUCCESS",we="PRODCUT_REVIEW_FAIL",_e="PRODCUT_REVIEW_RESET",Te="PRODUCT_TOP_REQUEST",Re="PRODUCT_TOP_SUCCESS",Pe="PRODCUT_TOP_FAIL",Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(){var r=Object(f.a)(m.a.mark((function r(a){var n,c;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a({type:oe}),r.next=4,y.a.get("/api/products?keyword=".concat(e,"&page=").concat(t));case 4:if(n=r.sent,!(c=n.data).message){r.next=9;break}throw new Error("unable to connect");case 9:a({type:de,payload:c}),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),a({type:le,payload:r.t0.message||"unable to fetch products"});case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e){return r.apply(this,arguments)}}()},Ne=function(){return function(){var e=Object(f.a)(m.a.mark((function e(t){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Te}),e.next=4,y.a.get("/api/product/top");case 4:r=e.sent,a=r.data,t({type:Re,payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:Pe,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},Ae=r(138),De=function(){return Object(a.jsx)(Ae.a,{animation:"border",role:"status",style:{width:"100px",height:"100px",margin:"auto",display:"block"},children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})})},Ue=r(139),Fe=function(e){var t=e.variant,r=e.children;return Object(a.jsx)(Ue.a,{variant:t,children:r})};Fe.defaultProps={message:"info"};var Me=Fe,Ge=r(145),Be=r(140),qe=function(){var e=Object(p.c)((function(e){return e.topProducts})).products,t=Object(p.b)();return Object(n.useEffect)((function(){e?0===e.length&&t(Ne()):t(Ne())}),[t,e]),Object(a.jsx)(c.a.Fragment,{children:e&&e.length>0?Object(a.jsx)(Ge.a,{pause:"hover",className:"bg-dark py-2",children:e.map((function(e){return Object(a.jsxs)(Ge.a.Item,{className:"text-center",children:[Object(a.jsx)(h.LinkContainer,{to:"/product/".concat(e._id),children:Object(a.jsx)(Be.a,{fluid:!0,className:"text-center m-auto",src:e.image,alt:e.name})}),Object(a.jsx)(Ge.a.Caption,{children:Object(a.jsx)(h.LinkContainer,{to:"/product/".concat(e._id),children:Object(a.jsxs)("h2",{className:"my-3 text-center text-white",children:[e.name," ($",e.Price,")"]})})})]})}))}):null})},Qe=function(e){var t=e.match,r=t.params.keyword,s=Number(t.params.numpage)||1,i=Object(p.b)(),o=Object(p.c)((function(e){return e.products})),d=o.loading,l=o.products,j=o.error,u=o.page,b=o.pages;return Object(n.useEffect)((function(){i(Le(r,s))}),[i,r,s,u,b]),Object(a.jsxs)(c.a.Fragment,{children:[t.params.numpage||r?null:Object(a.jsx)(qe,{}),Object(a.jsx)("h1",{children:"Latest Products"}),d?Object(a.jsx)(De,{}):j?Object(a.jsx)(Me,{variant:"danger",children:j}):Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(W.a,{children:l.map((function(e){return Object(a.jsx)(X.a,{sm:12,md:6,lg:4,xl:3,children:Object(a.jsx)(se,{product:e})},e._id)}))}),Object(a.jsx)(W.a,{className:"my-5 mx-1",children:b>1&&Object(a.jsxs)(ie.a,{children:[Object(a.jsx)(h.LinkContainer,{to:r&&u>=0?"/search/".concat(r,"/page/").concat(u-1):"/page/".concat(u-1),children:Object(a.jsx)(ie.a.Prev,{disabled:1===u||!u})}),Object(re.a)(Array(b).keys()).map((function(e){return Object(a.jsx)(h.LinkContainer,{to:r?"/search/".concat(r,"/page/").concat(e+1):"/page/".concat(e+1),children:e+1===s?Object(a.jsx)(ie.a.Item,{active:!0,children:e+1}):Object(a.jsx)(ie.a.Item,{children:e+1})})})),Object(a.jsx)(h.LinkContainer,{to:r&&u<=b?"/search/".concat(r,"/page/").concat(u+1):"/page/".concat(u+1),children:Object(a.jsx)(ie.a.Next,{disabled:u===b})})]})})]})]})},$e=r(149),ze=r(85),Ye=function(e){var t=e.title,r=e.description,n=e.keywords;return Object(a.jsxs)(ze.a,{children:[Object(a.jsx)("title",{children:t}),Object(a.jsx)("meta",{name:"description",content:r}),Object(a.jsx)("meta",{name:"keywords",content:n})]})};Ye.defaultProps={title:"Shop",description:"the best products for the cheapest prices",keywords:"electronics buy electronics, cheap electronics"};var Ve=Ye,He=function(e){var t=e.match.params.id,r=Object(n.useState)(1),s=Object(H.a)(r,2),i=s[0],o=s[1],l=Object(n.useState)(""),j=Object(H.a)(l,2),u=j[0],b=j[1],h=Object(n.useState)(""),O=Object(H.a)(h,2),x=O[0],g=O[1],v=Object(p.c)((function(e){return e.details})),E=Object(p.c)((function(e){return e.user})).user,S=Object(p.c)((function(e){return e.productReview})),k=S.loading,C=S.success,I=S.error,w=Object(p.b)();Object(n.useEffect)((function(){k||w(function(e){return function(){var t=Object(f.a)(m.a.mark((function t(r){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:je}),t.next=4,y.a.get("/api/product/"+e);case 4:if(a=t.sent,!(n=a.data).message){t.next=9;break}throw new Error("unable to connect");case 9:r({type:ue,payload:n}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),r({type:be,payload:t.t0.message||"unable to fetch products"});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[t,w,k]),Object(n.useEffect)((function(){w({type:_e})}),[w]);var _=v.product,T=v.error,R=v.loading;return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(Ve,{title:_?"shop | product: "+_.name:"product"}),Object(a.jsx)(d.Link,{className:"btn btn-light my-3",to:"/",children:"Go Back"}),R?Object(a.jsx)(De,{}):T?Object(a.jsx)(Me,{variant:"danger",children:T}):Object(a.jsx)(c.a.Fragment,{children:Object(a.jsxs)(W.a,{children:[Object(a.jsx)(c.a.Fragment,{children:Object(a.jsxs)(X.a,{md:6,children:[Object(a.jsx)(W.a,{children:Object(a.jsx)(X.a,{children:Object(a.jsx)(Be.a,{src:_.image,alt:_.name,fluid:!0})})}),Object(a.jsx)(W.a,{className:"my-3",children:Object(a.jsxs)(X.a,{children:[Object(a.jsx)("h2",{children:"Reviews"}),0===_.reviews.length?Object(a.jsx)(Me,{variant:"dark",children:"No reviews "}):Object(a.jsx)($e.a,{children:_.reviews.map((function(e){return Object(a.jsxs)($e.a.Item,{children:[Object(a.jsx)("strong",{children:e.name}),Object(a.jsx)(ce,{value:e.rating}),Object(a.jsx)("p",{children:e.createdAt.substring(0,10)}),Object(a.jsx)("p",{children:e.comment})]},e.user)}))}),Object(a.jsxs)($e.a.Item,{children:[C&&Object(a.jsx)(Me,{variant:"success",children:"Review created"}),I&&Object(a.jsx)(Me,{variant:"danger",children:I}),Object(a.jsx)("h2",{children:"Write a customer review"}),E._id?Object(a.jsxs)(J.a,{onSubmit:function(e){var t,r;e.preventDefault(),w((t=_._id,r={comment:x,rating:Number(u)},function(){var e=Object(f.a)(m.a.mark((function e(a,n){var c,s,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:Ce}),c=n().user.user.token,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},e.next=6,y.a.put("/api/product/".concat(t,"/review"),r,s);case 6:if(i=e.sent,"updated"!==(o=i.data).message){e.next=12;break}a({type:Ie}),e.next=13;break;case 12:throw new Error(o.message);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),a({type:we,payload:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r){return e.apply(this,arguments)}}()))},children:[Object(a.jsxs)(J.a.Group,{controlId:"rating",children:[Object(a.jsx)(J.a.Label,{children:"Rating:"}),Object(a.jsxs)(J.a.Control,{as:"select",value:u,onChange:function(e){return b(e.target.value)},children:[Object(a.jsx)("option",{value:"",children:"Select ..."}),Object(a.jsx)("option",{value:"1",children:"1- Poor"}),Object(a.jsx)("option",{value:"2",children:"2- Fail"}),Object(a.jsx)("option",{value:"3",children:"3- Good"}),Object(a.jsx)("option",{value:"4",children:"4- Very Good"}),Object(a.jsx)("option",{value:"5",children:"5- Excellent"})]})]}),Object(a.jsxs)(J.a.Group,{controlId:"coment",children:[Object(a.jsx)(J.a.Label,{children:"Write a review:"}),Object(a.jsx)(J.a.Control,{value:x,onChange:function(e){return g(e.target.value)},as:"textarea",rows:3})]}),Object(a.jsx)(K.a,{type:"submit",className:"btn bg-dark border-dark",disabled:""===x||""===u,children:"Submit"})]}):Object(a.jsxs)(Me,{variant:"dark",children:["Please ",Object(a.jsx)(d.Link,{to:"/login",children:"sign in"})," to leave a review"]})]})]})})]})}),Object(a.jsx)(X.a,{md:3,children:Object(a.jsxs)($e.a,{variant:"flush",children:[Object(a.jsx)($e.a.Item,{children:Object(a.jsx)("h4",{className:"mright-auto",children:_.name})}),Object(a.jsx)($e.a.Item,{children:Object(a.jsx)(ce,{value:_.rating,text:_.numReviews+" reviews"})}),Object(a.jsxs)($e.a.Item,{children:["Price: $",_.Price]}),Object(a.jsxs)($e.a.Item,{children:["Description: ",_.description]})]})}),Object(a.jsx)(X.a,{md:3,children:Object(a.jsx)(ae.a,{children:Object(a.jsxs)($e.a,{variant:"flush",children:[Object(a.jsx)($e.a.Item,{children:Object(a.jsxs)(W.a,{children:[Object(a.jsx)(X.a,{children:"Price:"}),Object(a.jsx)(X.a,{children:Object(a.jsxs)("strong",{children:["$",_.Price]})})]})}),Object(a.jsx)($e.a.Item,{children:Object(a.jsxs)(W.a,{children:[Object(a.jsx)(X.a,{children:"Status:"}),Object(a.jsx)(X.a,{children:_.countInStock>0?"In stock":"Out of stock"})]})}),_.countInStock>0&&Object(a.jsx)($e.a.Item,{children:Object(a.jsxs)(W.a,{children:[Object(a.jsx)(X.a,{children:"Quantity: "}),Object(a.jsx)(X.a,{children:Object(a.jsx)(J.a.Control,{as:"select",value:i,onChange:function(e){o(e.target.value)},children:Object(re.a)(Array(_.countInStock).keys()).map((function(e){return Object(a.jsx)("option",{value:e+1,children:e+1},e+1)}))})})]})}),Object(a.jsx)($e.a.Item,{children:Object(a.jsx)(W.a,{children:Object(a.jsx)(K.a,{onClick:function(r){e.history.push("/cart/".concat(t,"?qty=").concat(i))},className:"btn-block btn-dark",type:"button",disabled:0===_.countInStock,children:"Add to cart"})})})]})})})]})})]})},Je="ADD_ITEM_TO_CART",We="DELETE_ITEM_FROM_CART",Xe="SAVE_SHIPPING_ADDRESS",Ke="SAVE_PAYMENT_METHOD",Ze=function(e,t){return function(){var r=Object(f.a)(m.a.mark((function r(a,n){var c,s;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,y.a.get("/api/product/".concat(e));case 2:c=r.sent,(s=c.data)._id&&a({type:Je,payload:{product:s._id,name:s.name,image:s.image,Price:s.Price,countInStock:s.countInStock,qty:t}}),localStorage.setItem("cartItems",JSON.stringify(n().cart.cartItems));case 6:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},et=function(e){var t=e.match,r=e.location,c=e.history,s=t.params.id,i=r.search&&Number(r.search.split("=")[1]),o=Object(p.c)((function(e){return e.cart})).cartItems,l=Object(p.b)();Object(n.useEffect)((function(){i&&s&&l(Ze(s,i))}),[s,i,l]);var j=function(e){var t;l((t=e,function(){var e=Object(f.a)(m.a.mark((function e(r,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:We,payload:t}),localStorage.setItem("cartItems",a().cart.cartItems);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()))};return Object(a.jsxs)(W.a,{children:[Object(a.jsxs)(X.a,{md:8,children:[Object(a.jsx)("h1",{children:"Shopping Cart"}),0===o.length?Object(a.jsxs)(Me,{children:["Your cart is empty ",Object(a.jsx)(d.Link,{to:"/",children:" Go Back"})]}):Object(a.jsx)($e.a,{variant:"flush",children:o.map((function(e){return Object(a.jsx)($e.a.Item,{children:Object(a.jsxs)(W.a,{children:[Object(a.jsx)(X.a,{md:2,children:Object(a.jsx)(Be.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(a.jsx)(X.a,{md:3,children:Object(a.jsx)(d.Link,{to:"/product/".concat(e.product),children:e.name})}),Object(a.jsxs)(X.a,{md:2,children:["$",e.Price]}),Object(a.jsx)(X.a,{md:2,children:Object(a.jsx)(J.a.Control,{as:"select",value:e.qty,onChange:function(t){!function(e,t){var r=Number(e.target.value);l(Ze(t,r))}(t,e.product)},children:Object(re.a)(Array(e.countInStock).keys()).map((function(t){return Object(a.jsx)("option",{value:t+1,children:t+1},"opt_"+e.product+(t+1))}))})}),Object(a.jsx)(X.a,{md:2,children:Object(a.jsx)(K.a,{type:"button",variant:"light",onClick:function(t){j(e.product)},children:Object(a.jsx)("i",{className:"fas fa-trash"})})})]})},e.product)}))})]}),Object(a.jsx)(X.a,{md:4,children:Object(a.jsx)(ae.a,{children:Object(a.jsxs)($e.a,{variant:"flush",children:[Object(a.jsxs)($e.a.Item,{children:[Object(a.jsxs)("h2",{children:["Subtotal (",o.reduce((function(e,t){return e+t.qty}),0),") items"]}),"$",o.reduce((function(e,t){return e+t.qty*t.Price}),0).toFixed(2)]}),Object(a.jsx)($e.a.Item,{children:Object(a.jsx)(K.a,{type:"button",className:"bg-dark border-dark btn-block",disabled:0===o.length,onClick:function(){c.push("/login?redirect=shipping")},children:"Check out to proceed"})})]})})})]})},tt=function(e){var t=e.children;return Object(a.jsx)(o.a,{className:"justify-content-md-center",children:Object(a.jsx)(W.a,{className:"justify-content-md-center",children:Object(a.jsx)(X.a,{xs:12,md:6,children:t})})})},rt=function(e){var t=e.location,r=e.history,c=Object(n.useState)(""),s=Object(H.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(""),j=Object(H.a)(l,2),u=j[0],b=j[1],h=Object(p.b)(),O=Object(p.c)((function(e){return e.user})),x=O.loading,g=O.err,k=O.user,C=t.search?t.search.split("=")[1]:"/";Object(n.useEffect)((function(){k.token&&r.push(C)}),[r,C,O,k]);return Object(a.jsxs)(tt,{children:[Object(a.jsx)("h1",{children:"Sign In"}),g&&Object(a.jsx)(Me,{variant:"danger",children:g}),x&&Object(a.jsx)(Me,{}),Object(a.jsxs)(J.a,{onSubmit:function(e){e.preventDefault(),h(function(e,t){return function(){var r=Object(f.a)(m.a.mark((function r(a){var n,c,s;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a({type:v}),c={headers:{"Content-Type":"application/json"}},r.next=5,y.a.post("/api/auth/login",{email:e,password:t},c);case 5:s=r.sent,n=s.data,a({type:E,payload:n}),localStorage.setItem("userInfo",JSON.stringify(n)),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),a({type:S,payload:n?n.message:"Invaild login or password"});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()}(i,u))},children:[Object(a.jsxs)(J.a.Group,{controlId:"email",children:[Object(a.jsx)(J.a.Label,{children:"Email Address: "}),Object(a.jsx)(J.a.Control,{type:"email",placeholder:"Enter email",value:i,onChange:function(e){return o(e.target.value)}})]}),Object(a.jsxs)(J.a.Group,{controlId:"password",children:[Object(a.jsx)(J.a.Label,{children:"Password: "}),Object(a.jsx)(J.a.Control,{type:"password",placeholder:"Enter password",value:u,onChange:function(e){return b(e.target.value)}})]}),Object(a.jsx)(K.a,{className:"bg-dark border-dark",type:"submit",variant:"primary",children:"Sign In"}),Object(a.jsx)(W.a,{className:"py-3",children:Object(a.jsxs)(X.a,{children:["New Customer?",Object(a.jsx)(d.Link,{to:C?"/register?redirect=".concat(C):"/register",children:" Register"})]})})]})]})},at=function(e){var t=e.location,r=e.history,s=Object(n.useState)(""),i=Object(H.a)(s,2),o=i[0],d=i[1],l=Object(n.useState)(""),j=Object(H.a)(l,2),u=j[0],b=j[1],h=Object(n.useState)(""),O=Object(H.a)(h,2),x=O[0],g=O[1],v=Object(n.useState)(""),E=Object(H.a)(v,2),S=E[0],k=E[1],_=t.search?t.search.split("=")[1]:"/",T=Object(p.b)(),R=Object(p.c)((function(e){return e.regUser}));Object(n.useEffect)((function(){R.user.token&&r.push("/")}),[r,_,T,R]);var P=R.loading,L=R.err;return Object(a.jsx)(c.a.Fragment,{children:P?Object(a.jsx)(De,{}):Object(a.jsxs)(tt,{children:[L&&Object(a.jsx)(Me,{variant:"danger",children:L}),Object(a.jsxs)(J.a,{onSubmit:function(e){e.preventDefault(),T(function(e,t,r,a){return function(){var n=Object(f.a)(m.a.mark((function n(c){var s,i,o;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r===a){n.next=3;break}throw new Error("passwords did not match");case 3:return c({type:C}),o={headers:{"Content-Type":"application/json"}},n.next=7,y.a.post("/api/auth/user",{name:e,email:t,password:r},o);case 7:if(i=n.sent,!(s=i.data).message){n.next=11;break}throw new Error(s.message);case 11:c({type:I,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),c({type:w,payload:n.t0.message||"Error when registeration"});case 18:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(e){return n.apply(this,arguments)}}()}(S,o,u,x))},children:[Object(a.jsxs)(J.a.Group,{controlId:"email",children:[Object(a.jsx)(J.a.Label,{children:"Email address:"}),Object(a.jsx)(J.a.Control,{type:"email",placeholder:"enter your email",value:o,onChange:function(e){return d(e.target.value)}})]}),Object(a.jsxs)(J.a.Group,{controlId:"password",children:[Object(a.jsx)(J.a.Label,{children:"Password:"}),Object(a.jsx)(J.a.Control,{type:"password",placeholder:"enter password",value:u,onChange:function(e){return b(e.target.value)}})]}),Object(a.jsxs)(J.a.Group,{controlId:"password2",children:[Object(a.jsx)(J.a.Label,{children:"Reapet your password:"}),Object(a.jsx)(J.a.Control,{type:"password",placeholder:"enter password",value:x,onChange:function(e){return g(e.target.value)}})]}),Object(a.jsxs)(J.a.Group,{controlId:"username",children:[Object(a.jsx)(J.a.Label,{children:"Name:"}),Object(a.jsx)(J.a.Control,{type:"text",placeholder:"enter your name",value:S,onChange:function(e){return k(e.target.value)}})]}),Object(a.jsx)(K.a,{className:"bg-dark border-dark",type:"submit",variant:"primary",children:"Register"})]})]})})},nt=r(141),ct="ORDER_CREATE_REQUEST",st="ORDER_CREATE_SUCCESS",it="ORDER_CREATE_FAIL",ot="ORDER_DETAILS_REQUEST",dt="ORDER_DETAILS_SUCCESS",lt="ORDER_DETAILS_FAIL",jt="ORDER_PAYMENT_REQUEST",ut="ORDER_PAYMENT_SUCCESS",bt="ORDER_PAYMENT_FAIL",ht="ORDER_PAYMENT_RESET",pt="MYORDERS_REQUEST",Ot="MYORDERS_SUCCESS",xt="MYORDERS_FAIL",mt="ORDERS_ALL_LIST_REQUEST",ft="ORDERS_ALL_LIST_SUCCESS",gt="ORDERS_ALL_LIST_FAIL",yt="ORDER_DELIVERED_REQUEST",vt="ORDER_DELIVERED_SUCCESS",Et="ORDER_DELIVERED_FAIL",St=function(e){return function(){var t=Object(f.a)(m.a.mark((function t(r,a){var n,c,s,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=a().user.user.token,r({type:ot}),c={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},t.next=6,y.a.get("/api/order/".concat(e),c);case 6:if(s=t.sent,!(i=s.data).message){t.next=13;break}throw console.log(i),new Error(i.message);case 13:r({type:dt,payload:i});case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),r({type:lt,payload:t.t0.message||"unknown server error"});case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e,r){return t.apply(this,arguments)}}()},kt=function(e){var t=e.history,r=Object(n.useState)(""),s=Object(H.a)(r,2),i=s[0],o=s[1],l=Object(n.useState)(""),j=Object(H.a)(l,2),u=j[0],b=j[1],x=Object(n.useState)(""),g=Object(H.a)(x,2),v=g[0],E=g[1],S=Object(n.useState)(""),k=Object(H.a)(S,2),C=k[0],I=k[1],w=Object(n.useState)("true"),A=Object(H.a)(w,2),D=A[0],U=A[1],F=Object(p.b)(),M=Object(p.c)((function(e){return e.detailsUser})),G=Object(p.c)((function(e){return e.myOrders})),B=G.loading,q=G.error,Q=G.myorders,$=Object(p.c)((function(e){return e.user}));Object(n.useEffect)((function(){F(function(){var e=Object(f.a)(m.a.mark((function e(t,r){var a,n,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:pt}),e.prev=1,a=r().user.user.token,n={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},e.next=6,y.a.get("/api/order/myorders",n);case 6:if(c=e.sent,!(s=c.data).message){e.next=12;break}throw new Error(s.message);case 12:t({type:Ot,payload:s});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),t({type:xt,payload:e.t0.message||"Orders not found"});case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,r){return e.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){M.user&&(I(M.user.name),o(M.user.email))}),[M.user]),Object(n.useEffect)((function(){$.user.token?M.user.token||F(function(){var e=Object(f.a)(m.a.mark((function e(t,r){var a,n,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r("user").user.user.token,e.prev=1,t({type:_}),s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},e.next=6,y.a.get("/api/auth/user/profile",s);case 6:if(c=e.sent,!(n=c.data).message){e.next=10;break}throw new Error(n.message);case 10:t({type:T,payload:Object(O.a)(Object(O.a)({},n._doc),{},{token:n.token})}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t({type:R,payload:e.t0.message||"Error when getting the details"});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,r){return e.apply(this,arguments)}}()):t.push("/login")}),[t,F,$,M.user.token]);var z=M.successUpdatedMessage,Y=function(e){var t,r;e.preventDefault(),F((t={name:C,email:i,password:u,password2:v,token:M.user.token},r=U,function(){var e=Object(f.a)(m.a.mark((function e(a,n){var c,s,i,o,d,l,j,u,b;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a({type:P}),i=t.password,o=t.password2,d=t.name,l=t.email,j=t.token,i===o){e.next=4;break}return e.abrupt("return",a({type:N,payload:"Passwords do not match"}));case 4:return e.prev=4,u=""!==i||""!==o?t:{name:d,email:l},b={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(j)}},e.next=9,y.a.put("/api/auth/user/update",u,b);case 9:if(c=e.sent,!(s=c.data).message){e.next=15;break}throw new Error(s.message);case 15:a({type:L,payload:s}),r("true");case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),a({type:N,payload:e.t0.message||"Unexpected error"});case 22:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(t,r){return e.apply(this,arguments)}}()))},V=M.loading,Z=M.err;return Object(a.jsx)(c.a.Fragment,{children:V?Object(a.jsx)(De,{}):Object(a.jsxs)(W.a,{children:[Object(a.jsxs)(X.a,{md:3,children:[Object(a.jsx)("h2",{children:"Profile "}),z&&Object(a.jsx)(Me,{variant:"success",children:z}),Z&&Object(a.jsx)(Me,{variant:"danger",children:Z}),Object(a.jsxs)(J.a,{onSubmit:Y,children:[Object(a.jsxs)(J.a.Group,{controlId:"username",children:[Object(a.jsx)(J.a.Label,{children:"Name:"}),Object(a.jsx)(J.a.Control,{type:"text",placeholder:"enter your name",value:C,onChange:function(e){return I(e.target.value)},readonly:D})]}),Object(a.jsxs)(J.a.Group,{controlId:"email",children:[Object(a.jsx)(J.a.Label,{children:"Email address:"}),Object(a.jsx)(J.a.Control,{type:"email",placeholder:"enter your email",value:i,onChange:function(e){return o(e.target.value)},readonly:D})]}),Object(a.jsxs)(J.a.Group,{controlId:"password",children:[Object(a.jsx)(J.a.Label,{children:"Password:"}),Object(a.jsx)(J.a.Control,{type:"password",placeholder:"enter new password",value:u,onChange:function(e){return b(e.target.value)},readonly:D})]}),Object(a.jsxs)(J.a.Group,{controlId:"password2",children:[Object(a.jsx)(J.a.Label,{children:"Reapet your password:"}),Object(a.jsx)(J.a.Control,{type:"password",placeholder:"enter new password",value:v,onChange:function(e){return E(e.target.value)},readonly:D})]}),"true"===D&&Object(a.jsx)(K.a,{className:"bg-dark border-dark my-3",type:"button",onClick:function(){U(null)},children:"Modify"}),!D&&Object(a.jsx)(K.a,{className:"bg-dark border-dark my-3",type:"submit",onSubmit:Y,children:"Submit"})]})]}),Object(a.jsxs)(X.a,{md:9,children:[Object(a.jsx)("h2",{children:"Orders"}),B&&Object(a.jsx)(De,{}),q&&Object(a.jsx)(Me,{variant:"danger",children:q}),Q&&Object(a.jsxs)(nt.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{}),Object(a.jsx)("th",{children:"Order id"}),Object(a.jsx)("th",{children:"Date"}),Object(a.jsx)("th",{children:"Total"}),Object(a.jsx)("th",{children:"Paid"}),Object(a.jsx)("th",{children:"Deliverd"}),Object(a.jsx)("th",{})]})}),Object(a.jsx)("tbody",{children:Q.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:t+1}),Object(a.jsx)("th",{children:Object(a.jsx)(d.Link,{to:"/order/".concat(e._id),style:{color:"black"},children:Object(a.jsx)("p",{children:e._id})})}),Object(a.jsx)("th",{children:e.createdAt.substring(0,10)}),Object(a.jsx)("th",{children:e.totalPrice}),Object(a.jsx)("th",{children:e.isPaid?e.paidAt.substring(0,10):Object(a.jsx)("i",{className:"fas fa-times",style:{color:"darkred"}})}),Object(a.jsx)("th",{children:e.isDelivered?e.deliveredAt.substring(0,10):Object(a.jsx)("i",{className:"fas fa-times",style:{color:"darkred"}})}),Object(a.jsx)("th",{children:Object(a.jsx)(h.LinkContainer,{to:"/order/".concat(e._id),children:Object(a.jsx)(K.a,{className:"btn bg-dark border-dark",children:"Details"})})})]})}))})]})]})]})})},Ct=function(e){var t=e.step1,r=e.step2,n=e.step3,c=e.step4;return Object(a.jsxs)(u.a,{className:"justify-content-between mb-4",children:[Object(a.jsx)(u.a.Item,{className:"mx-2 font-weight-bold",children:t?Object(a.jsx)(h.LinkContainer,{to:"/login",children:Object(a.jsx)(u.a.Link,{className:"text-dark",children:"Sign In"})}):Object(a.jsx)(u.a.Link,{disabled:!0,children:"Sign In"})}),Object(a.jsx)(u.a.Item,{className:"mx-2 font-weight-bold",children:r?Object(a.jsx)(h.LinkContainer,{to:"/shipping",children:Object(a.jsx)(u.a.Link,{className:"text-dark",children:"Shipping"})}):Object(a.jsx)(u.a.Link,{disabled:!0,children:"Shipping"})}),Object(a.jsx)(u.a.Item,{className:"mx-2 font-weight-bold",children:n?Object(a.jsx)(h.LinkContainer,{to:"/payment",children:Object(a.jsx)(u.a.Link,{className:"text-dark",children:"Payment"})}):Object(a.jsx)(u.a.Link,{disabled:!0,children:"Payment"})}),Object(a.jsx)(u.a.Item,{className:"mx-2 font-weight-bold",children:c?Object(a.jsx)(h.LinkContainer,{to:"/placeorder",children:Object(a.jsx)(u.a.Link,{className:"text-dark",children:"Place Order"})}):Object(a.jsx)(u.a.Link,{disabled:!0,children:"Place Order"})})]})},It=function(e){var t=e.history,r=Object(p.c)((function(e){return e.cart})).shippingAddress;console.log(r);var c=Object(p.b)(),s=Object(n.useState)(r.address),i=Object(H.a)(s,2),o=i[0],d=i[1],l=Object(n.useState)(r.city),j=Object(H.a)(l,2),u=j[0],b=j[1],h=Object(n.useState)(r.postalcode),O=Object(H.a)(h,2),x=O[0],m=O[1],f=Object(n.useState)(r.country),g=Object(H.a)(f,2),y=g[0],v=g[1];return Object(a.jsxs)(tt,{children:[Object(a.jsx)(Ct,{step1:!0,step2:!0}),Object(a.jsx)("h1",{children:"Shipping"}),Object(a.jsxs)(J.a,{onSubmit:function(e){var r;e.preventDefault(),c((r={address:o,city:u,postalcode:x,country:y},function(e){e({type:Xe,payload:r}),localStorage.setItem("shippingAddress",JSON.stringify(r))})),t.push("/payment")},children:[Object(a.jsxs)(J.a.Group,{controlId:"address",children:[Object(a.jsx)(J.a.Label,{children:"Address"}),Object(a.jsx)(J.a.Control,{type:"text",placeholder:"Enter address",value:o,onChange:function(e){return d(e.target.value)},required:!0})]}),Object(a.jsxs)(J.a.Group,{controlId:"city",children:[Object(a.jsx)(J.a.Label,{children:"City"}),Object(a.jsx)(J.a.Control,{type:"text",placeholder:"Enter city",value:u,onChange:function(e){return b(e.target.value)},required:!0})]}),Object(a.jsxs)(J.a.Group,{controlId:"postalcode",children:[Object(a.jsx)(J.a.Label,{children:"Postal Code"}),Object(a.jsx)(J.a.Control,{type:"text",placeholder:"Enter postal code",value:x,onChange:function(e){return m(e.target.value)},required:!0})]}),Object(a.jsxs)(J.a.Group,{controlId:"country",children:[Object(a.jsx)(J.a.Label,{children:"Country"}),Object(a.jsx)(J.a.Control,{type:"text",placeholder:"Enter country",value:y,onChange:function(e){return v(e.target.value)},required:!0})]}),Object(a.jsx)(K.a,{type:"submit",className:"bg-dark border-dark  ",variant:"primary",children:"Continue"})]})]})},wt=function(e){var t=e.history;Object(p.c)((function(e){return e.cart})).shippingAddress||t.push("/shipping");var r=Object(p.b)(),c=Object(n.useState)("PayPal"),s=Object(H.a)(c,2),i=s[0],o=s[1];return Object(a.jsxs)(tt,{children:[Object(a.jsx)(Ct,{step1:!0,step2:!0,step3:!0}),Object(a.jsx)("h1",{children:"Paytment Method"}),Object(a.jsxs)(J.a,{onSubmit:function(e){var a;e.preventDefault(),r((a={paymentMethod:i},function(e){e({type:Ke,payload:a}),localStorage.setItem("paymentMethod",JSON.stringify(a))})),t.push("/placeorder")},children:[Object(a.jsxs)(J.a.Group,{children:[Object(a.jsx)(J.a.Label,{as:"legend",children:"Select Method"}),Object(a.jsxs)(X.a,{className:"my-3",children:[Object(a.jsx)(J.a.Check,{type:"radio",label:"PayPal or Credit Card",id:"PayPal",name:"paymentMethod",value:"PayPal",checked:!0,onChange:function(e){return o(e.target.value)}}),Object(a.jsx)(J.a.Check,{type:"radio",label:"Stripe",id:"Stripe",name:"paymentMethod",value:"Stripe",onChange:function(e){return o(e.target.value)}})]})]}),Object(a.jsx)(K.a,{type:"submit",className:"bg-dark border-dark  ",variant:"primary",children:"Continue"})]})]})},_t=function(e){var t=e.history,r=Object(p.b)(),s=function(e){return(Math.round(100*e)/100).toFixed(2)},i=Object(p.c)((function(e){return e.cart}));i.itemsPrice=i.cartItems.reduce((function(e,t){return e+t.Price*t.qty}),0),i.itemsPrice=s(Number(i.itemsPrice.toFixed(2))),i.shippingPrice=i.itemsPrice>100?s(0):s(100),i.taxPrice=s(Number((.15*i.itemsPrice).toFixed(2))),i.totalPrice=s(Number(i.taxPrice)+Number(i.itemsPrice)+Number(i.shippingPrice));var o=Object(p.c)((function(e){return e.orderCreate})),l=o.order,j=o.success,u=o.error;Object(n.useEffect)((function(){j&&l&&t.push("/order/".concat(l._id))}),[j,t]);return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(Ct,{step1:!0,step2:!0,step3:!0,step4:!0}),Object(a.jsxs)(W.a,{children:[Object(a.jsx)(X.a,{md:8,children:Object(a.jsxs)($e.a,{variant:"flush",children:[Object(a.jsxs)($e.a.Item,{children:[Object(a.jsx)("h2",{children:"SHIPPING"}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Address: "}),i.shippingAddress.address,", ",i.shippingAddress.city,","," ",i.shippingAddress.postalcode,", ",i.shippingAddress.country]})]}),Object(a.jsxs)($e.a.Item,{children:[Object(a.jsx)("h2",{children:"PAYMENT METHOD"}),Object(a.jsxs)("p",{children:["Method: ",i.paymentMethod.paymentMethod]})]}),Object(a.jsxs)($e.a.Item,{children:[Object(a.jsx)("h2",{children:"ORDER ITEMS: "}),0===i.cartItems.length?Object(a.jsx)(Me,{children:"Your cart is empty"}):Object(a.jsx)($e.a,{variant:"flush",children:i.cartItems.map((function(e,t){return Object(a.jsx)($e.a.Item,{children:Object(a.jsxs)(W.a,{children:[Object(a.jsx)(X.a,{md:1,children:Object(a.jsx)(Be.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(a.jsx)(X.a,{children:Object(a.jsx)(d.Link,{to:"/product/".concat(e.product),children:e.name})}),Object(a.jsxs)(X.a,{md:4,children:[e.qty," x $",e.Price.toFixed(2)," = $",(e.Price*e.qty).toFixed(2)]})]})},t)}))})]})]})}),Object(a.jsx)(X.a,{md:4,children:Object(a.jsxs)(ae.a,{children:[Object(a.jsxs)($e.a,{variant:"flush",children:[Object(a.jsx)($e.a.Item,{children:Object(a.jsx)("h2",{children:"Items"})}),Object(a.jsx)($e.a.Item,{children:Object(a.jsxs)(W.a,{children:[Object(a.jsx)(X.a,{children:"Items"}),Object(a.jsxs)(X.a,{children:["$",i.itemsPrice]})]})}),Object(a.jsx)($e.a.Item,{children:Object(a.jsxs)(W.a,{children:[Object(a.jsx)(X.a,{children:"Shipping"}),Object(a.jsxs)(X.a,{children:["$",i.shippingPrice]})]})}),Object(a.jsx)($e.a.Item,{children:Object(a.jsxs)(W.a,{children:[Object(a.jsx)(X.a,{children:"Tax"}),Object(a.jsxs)(X.a,{children:["$",i.taxPrice]})]})})]}),Object(a.jsx)($e.a.Item,{children:Object(a.jsxs)(W.a,{children:[Object(a.jsx)(X.a,{children:"Total"}),Object(a.jsxs)(X.a,{children:["$",i.totalPrice]})]})}),Object(a.jsx)($e.a.Item,{children:u&&Object(a.jsx)(Me,{variant:"danger",children:u})}),Object(a.jsx)($e.a.Item,{children:Object(a.jsx)(K.a,{type:"button",className:"btn-block bg-dark border-dark",onClick:function(e){e.preventDefault(),r(function(e){return function(){var t=Object(f.a)(m.a.mark((function t(r,a){var n,c,s,i,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:ct}),n=a().user.user,c=n.token,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=7,y.a.post("/api/order",e,s);case 7:if(i=t.sent,!(o=i.data).message){t.next=11;break}throw new Error(o.message);case 11:r({type:st,payload:o}),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),console.log(t.t0),r({type:it,payload:t.t0.message||"unkown error"});case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,r){return t.apply(this,arguments)}}()}({orderItems:i.cartItems,shippingAddress:i.shippingAddress,paymentMethod:i.paymentMethod.paymentMethod,itemsPrice:i.itemsPrice,shippingPrice:i.shippingPrice,taxPrice:i.taxPrice,totalPrice:i.totalPrice}))},disabled:0===i.cartItems.length,children:"Proceed"})})]})})]})]})},Tt=r(89),Rt=function(e){var t=e.match.params.id,r=Object(n.useState)(!1),s=Object(H.a)(r,2),i=s[0],o=s[1],l=Object(n.useState)(!1),j=Object(H.a)(l,2),u=j[0],b=j[1],h=Object(n.useState)(null),O=Object(H.a)(h,2),x=O[0],g=O[1],v=Object(p.b)(),E=Object(p.c)((function(e){return e.orderDetails})),S=Object(p.c)((function(e){return e.orderPayment})),k=E.order,C=E.loading,I=E.error,w=S.loading,_=S.success;Object(n.useEffect)((function(){var e=function(){var e=Object(f.a)(m.a.mark((function e(){var t,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/api/config/paypal");case 2:t=e.sent,r=t.data,(a=document.createElement("script")).type="text/javascript",a.src="https://www.paypal.com/sdk/js?client-id=".concat(r),a.setAttribute("async","true"),a.onload=function(){o(!0)},document.body.appendChild(a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!k||_?(v(St(t)),v({type:ht})):k.isPaid||(window.isPaid?o(!0):e())}),[t,v,_,k]),Object(n.useEffect)((function(){k&&k._id!==t&&v(St(t))}),[k,t]),Object(n.useEffect)((function(){!0===_&&(b(!0),g(Date.now()))}),[_]);return Object(a.jsx)(c.a.Fragment,{children:C?Object(a.jsx)(De,{}):I?Object(a.jsx)(Me,{variant:"danger",children:I}):Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsxs)("h1",{children:["Order: ",t]}),Object(a.jsxs)(W.a,{children:[Object(a.jsx)(X.a,{md:8,children:Object(a.jsxs)($e.a,{variant:"flush",children:[Object(a.jsxs)($e.a.Item,{children:[Object(a.jsx)("h2",{children:"SHIPPING"}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Name: "}),k.user.name]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Email: "}),Object(a.jsx)("a",{href:"mailto:".concat(k.user.email),children:k.user.email})]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Address: "}),k.shippingAddress.address,", ",k.shippingAddress.city,",",k.shippingAddress.postalcode,", ",k.shippingAddress.country]}),k.isDelivered?Object(a.jsxs)(Me,{variant:"success",children:["Paid on ",k.deliveredAt]}):Object(a.jsx)(Me,{variant:"danger",children:"Not delivered yet"})]}),Object(a.jsxs)($e.a.Item,{children:[Object(a.jsx)("h2",{children:"PAYMENT METHOD"}),Object(a.jsxs)("p",{children:["Method: ",k.paymentMethod]}),k.paidAt||x?Object(a.jsxs)(Me,{variant:"success",children:["Paid on ",k.paidAt||x]}):Object(a.jsx)(Me,{variant:"danger",children:"Not paid yet"})]}),Object(a.jsxs)($e.a.Item,{children:[Object(a.jsx)("h2",{children:"ORDER ITEMS: "}),0===k.orderItems.length?Object(a.jsx)(Me,{children:"Order is empty"}):Object(a.jsx)($e.a,{variant:"flush",children:k.orderItems.map((function(e,r){return Object(a.jsx)($e.a.Item,{children:Object(a.jsxs)(W.a,{children:[Object(a.jsx)(X.a,{md:1,children:Object(a.jsx)(Be.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(a.jsx)(X.a,{children:Object(a.jsx)(d.Link,{to:"/product/".concat(e.product),children:e.name})}),Object(a.jsxs)(X.a,{md:4,children:[e.qty," x $",Number(e.Price).toFixed(2)," = $",(Number(e.Price)*e.qty).toFixed(2)]})]})},t+r)}))})]})]})}),Object(a.jsx)(X.a,{md:4,children:Object(a.jsx)(ae.a,{children:Object(a.jsxs)($e.a,{variant:"flush",children:[Object(a.jsx)($e.a.Item,{children:Object(a.jsx)("h2",{children:"Items"})}),Object(a.jsx)($e.a.Item,{children:Object(a.jsxs)(W.a,{children:[Object(a.jsx)(X.a,{children:"Items"}),Object(a.jsxs)(X.a,{children:["$",k.itemsPrice]})]})}),Object(a.jsx)($e.a.Item,{children:Object(a.jsxs)(W.a,{children:[Object(a.jsx)(X.a,{children:"Shipping"}),Object(a.jsxs)(X.a,{children:["$",k.shippingPrice]})]})}),Object(a.jsx)($e.a.Item,{children:Object(a.jsxs)(W.a,{children:[Object(a.jsx)(X.a,{children:"Tax"}),Object(a.jsxs)(X.a,{children:["$",k.taxPrice]})]})}),Object(a.jsx)($e.a.Item,{children:Object(a.jsxs)(W.a,{children:[Object(a.jsx)(X.a,{children:"Total"}),Object(a.jsxs)(X.a,{children:["$",k.totalPrice]})]})}),Object(a.jsx)($e.a.Item,{style:{display:(k.isPaid||u)&&"none"},children:!w&&i||k.isPaid&&!u?Object(a.jsx)(Tt.PayPalButton,{amount:k.totalPrice,onSuccess:function(e,r){v(function(e,t){return function(){var r=Object(f.a)(m.a.mark((function r(a,n){var c,s,i,o;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c=n().user.user.token,a({type:jt}),s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},r.next=6,y.a.put("/api/order/".concat(e,"/pay"),t,s);case 6:if(i=r.sent,(o=i.data).message){r.next=12;break}a({type:ut}),r.next=13;break;case 12:throw new Error(o.message);case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),a({type:bt,payload:r.t0.message||"unknown server error"});case 18:case"end":return r.stop()}}),r,null,[[0,15]])})));return function(e,t){return r.apply(this,arguments)}}()}(t,e))}}):Object(a.jsx)(De,{})})]})})})]})]})})},Pt=function(e){var t=e.history,r=Object(p.b)(),s=Object(p.c)((function(e){return e.listUsers})),i=Object(p.c)((function(e){return e.deleteUser})).success,o=Object(p.c)((function(e){return e.user})).user,d=s.loading,l=s.users,j=s.error,u=function(e){window.confirm("are you show you want to delete the user")&&r(function(e){return function(){var t=Object(f.a)(m.a.mark((function t(r,a){var n,c,s,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:M}),n=a("user").user.user.token,c={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},t.next=6,y.a.delete("/api/auth/user/".concat(e),c);case 6:if(s=t.sent,"deleted"!==(i=s.data).message){t.next=12;break}r({type:G}),t.next=13;break;case 12:throw new Error(i.message);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),r({type:B,payload:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,r){return t.apply(this,arguments)}}()}(e))};return Object(n.useEffect)((function(){o.isAdmin?r(function(){var e=Object(f.a)(m.a.mark((function e(t,r){var a,n,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r("user").user.user.token,e.prev=1,t({type:A}),n={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},e.next=6,y.a.get("/api/auth/users",n);case 6:if(c=e.sent,!(s=c.data).message){e.next=10;break}throw new Error(s.message);case 10:t({type:D,payload:s}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t({type:U,payload:e.t0.message||"Error when getting the details"});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,r){return e.apply(this,arguments)}}()):t.push("/login")}),[t,i]),Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("h1",{children:"Users"}),d&&Object(a.jsx)(De,{}),j&&Object(a.jsx)(Me,{variant:"danger",children:j}),l&&Object(a.jsxs)(nt.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:"ID"}),Object(a.jsx)("td",{children:"Name"}),Object(a.jsx)("td",{children:"Email"}),Object(a.jsx)("td",{children:"Admin"}),Object(a.jsx)("td",{})]})}),Object(a.jsx)("tbody",{children:l.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:e._id}),Object(a.jsx)("td",{children:e.name}),Object(a.jsx)("td",{children:Object(a.jsx)("a",{href:"mailto:".concat(e.email),children:e.email})}),Object(a.jsx)("td",{children:e.isAdmin?Object(a.jsx)("i",{className:"fas fa-check",style:{color:"green"}}):Object(a.jsx)("i",{className:"fas fa-times",style:{color:"darkred"}})}),Object(a.jsxs)("td",{children:[Object(a.jsx)(h.LinkContainer,{to:"/admin/user/".concat(e._id,"/edit"),children:Object(a.jsx)(K.a,{variant:"light",className:"btn-sm",children:Object(a.jsx)("i",{className:"fas fa-edit"})})}),Object(a.jsx)(K.a,{variant:"danger",className:"btn-sm",onClick:function(){return u(e._id)},children:Object(a.jsx)("i",{className:"fas fa-trash"})})]})]},e._id)}))})]})]})},Lt=function(e){var t=e.match.params.id,r=Object(p.c)((function(e){return e.editUser})),s=r.user,i=r.loading,o=r.error,l=Object(p.c)((function(e){return e.updateUser})),j=l.user,u=l.loading,b=l.error,h=Object(n.useState)(""),O=Object(H.a)(h,2),x=O[0],g=O[1],v=Object(n.useState)(!1),E=Object(H.a)(v,2),S=E[0],k=E[1],C=Object(n.useState)(""),I=Object(H.a)(C,2),w=I[0],_=I[1],T=Object(p.b)();Object(n.useEffect)((function(){s&&s._id===t&&(j._id!==t||s.name===j.name&&s.isAdmin===j.isAdmin&&s.email===j.email)?(g(s.email),k(s.isAdmin),_(s.name)):T(function(e){return function(){var t=Object(f.a)(m.a.mark((function t(r,a){var n,c,s,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:q}),n=a("user").user.user.token,c={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},t.next=6,y.a.get("/api/auth/user/".concat(e),c);case 6:if(s=t.sent,(i=s.data).message){t.next=12;break}r({type:Q,payload:i}),t.next=13;break;case 12:throw new Error(i.message);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),r({type:$,payload:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,r){return t.apply(this,arguments)}}()}(t))}),[s,T,t,j]);return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(d.Link,{to:"/admin/users",className:"btn bg-dark text-white my-3",children:"Go back"}),i||u?Object(a.jsx)(De,{}):Object(a.jsxs)(tt,{children:[o||b&&Object(a.jsx)(Me,{variant:"danger",children:o||b}),Object(a.jsxs)(J.a,{onSubmit:function(e){e.preventDefault(),T(function(e,t){return function(){var r=Object(f.a)(m.a.mark((function r(a,n){var c,s,i,o;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a({type:z}),c=n("user").user.user.token,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},r.next=6,y.a.put("/api/auth/user/".concat(e),t,s);case 6:if(i=r.sent,(o=i.data).message){r.next=12;break}a({type:Y,payload:o}),r.next=13;break;case 12:throw new Error(o.message);case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),a({type:V,payload:r.t0.message});case 18:case"end":return r.stop()}}),r,null,[[0,15]])})));return function(e,t){return r.apply(this,arguments)}}()}(t,{email:x,isAdmin:S,name:w}))},children:[Object(a.jsx)("h1",{children:"Edit User"}),Object(a.jsxs)(J.a.Group,{controlId:"email",children:[Object(a.jsx)(J.a.Label,{children:"Email address:"}),Object(a.jsx)(J.a.Control,{type:"email",placeholder:"enter your email",value:x,onChange:function(e){return g(e.target.value)}})]}),Object(a.jsxs)(J.a.Group,{controlId:"username",children:[Object(a.jsx)(J.a.Label,{children:"Name:"}),Object(a.jsx)(J.a.Control,{type:"text",placeholder:"enter your name",value:w,onChange:function(e){return _(e.target.value)}})]}),Object(a.jsx)(J.a.Group,{id:"isAdmin",children:Object(a.jsx)(J.a.Check,{type:"checkbox",label:"Admin",checked:S,onChange:function(){return k(!S)}})}),Object(a.jsx)(K.a,{className:"bg-dark border-dark",type:"submit",variant:"primary",children:"Update"})]})]})]})},Nt=r(143),At=function(e){var t=e.product,r=Object(n.useState)(""),c=Object(H.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(""),d=Object(H.a)(o,2),l=d[0],j=d[1],u=Object(n.useState)(""),b=Object(H.a)(u,2),h=b[0],p=b[1],x=Object(n.useState)(0),g=Object(H.a)(x,2),v=g[0],E=g[1],S=Object(n.useState)(""),k=Object(H.a)(S,2),C=k[0],I=k[1],w=Object(n.useState)(0),_=Object(H.a)(w,2),T=_[0],R=_[1],P=Object(n.useState)(""),L=Object(H.a)(P,2),N=L[0],A=L[1],D=Object(n.useState)(!1),U=Object(H.a)(D,2),F=U[0],M=U[1];Object(n.useEffect)((function(){t&&(i(t.name),j(t.brand),p(t.categroy),E(t.Price),I(t.description),R(t.countInStock),A(t.image))}),[t]);var G=function(){var e=Object(f.a)(m.a.mark((function e(t){var r,a,n,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),r=t.target.files[0],(a=new FormData).append("image",r),e.prev=4,n={headers:{"Content-Type":"multipart/form-data"}},e.next=8,y.a.post("/api/upload",a,n);case 8:c=e.sent,s=c.data,A(s),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:M(!1);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(Nt.a,Object(O.a)(Object(O.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:Object(a.jsxs)(J.a,{children:[Object(a.jsx)(Nt.a.Header,{closeButton:!0,children:Object(a.jsx)(Nt.a.Title,{id:"contained-modal-title-vcenter",children:"Create New Product"})}),Object(a.jsxs)(Nt.a.Body,{children:[Object(a.jsx)("h4",{children:"Product Data:"}),Object(a.jsxs)(J.a.Group,{controlId:"name",children:[Object(a.jsx)(J.a.Label,{children:"name:"}),Object(a.jsx)(J.a.Control,{type:"text",placeholder:"product name",required:!0,value:s,onChange:function(e){return i(e.target.value)}})]}),Object(a.jsxs)(J.a.Group,{controlId:"description",children:[Object(a.jsx)(J.a.Label,{children:"product description:"}),Object(a.jsx)(J.a.Control,{as:"textarea",rows:3,placeholder:"describe your product",required:!0,value:C,onChange:function(e){return I(e.target.value)}})]}),Object(a.jsxs)(J.a.Group,{controlId:"brand",children:[Object(a.jsx)(J.a.Label,{children:"brand:"}),Object(a.jsx)(J.a.Control,{type:"text",placeholder:"product brand",required:!0,value:l,onChange:function(e){return j(e.target.value)}})]}),Object(a.jsxs)(J.a.Group,{controlId:"category",children:[Object(a.jsx)(J.a.Label,{children:"Categeory:"}),Object(a.jsx)(J.a.Control,{type:"text",placeholder:"product category",required:!0,value:h,onChange:function(e){return p(e.target.value)}})]}),Object(a.jsxs)(J.a.Group,{controlId:"image",children:[Object(a.jsx)(J.a.Label,{children:"Image:"}),Object(a.jsx)(J.a.Control,{type:"text",placeholder:"product image",required:!0,value:N,onChange:function(e){return A(e.target.value)}}),Object(a.jsx)(J.a.File,{id:"image-file",label:"Choose file",custom:!0,onChange:G}),F&&Object(a.jsx)(De,{})]}),Object(a.jsxs)(J.a.Group,{controlId:"countInStock",children:[Object(a.jsx)(J.a.Label,{children:"Count in Stock:"}),Object(a.jsx)(J.a.Control,{type:"number",placeholder:"items in stock",required:!0,value:T,onChange:function(e){return R(Math.round(e.target.value)<0?0:Math.round(e.target.value))}})]}),Object(a.jsxs)(J.a.Group,{controlId:"Price",children:[Object(a.jsx)(J.a.Label,{children:"Price: "}),Object(a.jsx)(J.a.Control,{type:"number",placeholder:"product price",required:!0,value:v,onChange:function(e){return E(e.target.value<0?0:e.target.value)}})]})]}),Object(a.jsxs)(Nt.a.Footer,{children:[Object(a.jsx)(J.a.Group,{children:Object(a.jsx)(K.a,{type:"submit",className:"bg-dark border-dark",onClick:function(r){r.preventDefault(),s&&v&&C&&N&&T&&h&&l&&(t?e.onSubmit(t._id,{name:s,Price:v,description:C,image:N,countInStock:T,category:h,brand:l}):e.onSubmit({name:s,Price:v,description:C,image:N,countInStock:T,category:h,brand:l}))},children:"Submit"})}),Object(a.jsx)(K.a,{onClick:e.onHide,className:"bg-danger border-danger",children:"Close"})]})]})}))},Dt=function(e){var t=e.history,r=e.match,s=Object(p.b)(),i=Number(r.params.page)||1,o=Object(n.useState)(!1),d=Object(H.a)(o,2),l=d[0],j=d[1],u=Object(n.useState)(!1),b=Object(H.a)(u,2),x=b[0],g=b[1],v=Object(n.useState)({}),E=Object(H.a)(v,2),S=E[0],k=E[1],C=Object(p.c)((function(e){return e.products})),I=C.loading,w=C.products,_=C.pages,T=C.page,R=C.error,P=Object(p.c)((function(e){return e.productDelete})),L=P.loading,N=P.success,A=P.error,D=Object(p.c)((function(e){return e.productEdit})),U=D.success,F=D.error,M=D.loading,G=Object(p.c)((function(e){return e.productCreate})),B=G.loading,q=G.success,Q=G.error,$=Object(p.c)((function(e){return e.user})).user,z=function(e){var t;window.confirm("are you show you want to delete the user")&&(s({type:ye}),s((t=e,function(){var e=Object(f.a)(m.a.mark((function e(r,a){var n,c,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:he}),n=a().user.user.token,c={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},e.next=6,y.a.delete("/api/product/".concat(t),c);case 6:if(s=e.sent,"deleted"!==(i=s.data).message){e.next=12;break}r({type:pe}),e.next=13;break;case 12:throw new Error(i.message);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),r({type:Oe,payload:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r){return e.apply(this,arguments)}}())))};Object(n.useEffect)((function(){$.isAdmin?0===w.length||N||q||U?s(Le("",i)):i!==T&&(console.log("heoll"),s(Le("",i))):t.push("/login"),(M||L||B)&&(s({type:ye}),s({type:ke}),s({type:xe}))}),[t,N,q,U,M,B,L,i,T]);return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(At,{show:l,onSubmit:function(e){var t;s((t=e,function(){var e=Object(f.a)(m.a.mark((function e(r,a){var n,c,s,i,o,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:me}),n=a().user.user.token,c=a().user.user._id,s=Object(O.a)(Object(O.a)({},t),{},{user:c}),i={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},e.next=8,y.a.post("/api/product/new",s,i);case 8:if(o=e.sent,!(d=o.data)._id){e.next=14;break}r({type:fe}),e.next=15;break;case 14:throw new Error(d.message);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),r({type:ge,payload:e.t0.message});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r){return e.apply(this,arguments)}}())),j(!1)},onHide:function(){j(!1)}}),Object(a.jsx)(At,{product:S,show:x,onSubmit:function(e,t){var r,a;s((r=e,a=t,function(){var e=Object(f.a)(m.a.mark((function e(t,n){var c,s,i,o,d,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:ve}),c=n().user.user.token,s=n().user.user._id,i=Object(O.a)(Object(O.a)({},a),{},{user:s}),o={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},e.next=8,y.a.put("/api/product/".concat(r,"/edit"),i,o);case 8:if(d=e.sent,!(l=d.data)._id){e.next=14;break}t({type:Ee}),e.next=15;break;case 14:throw new Error(l.message);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),t({type:Se,payload:e.t0.message});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r){return e.apply(this,arguments)}}())),g(!1)},onHide:function(){g(!1)}}),Object(a.jsxs)(W.a,{className:"align-items-center",children:[Object(a.jsx)(X.a,{children:Object(a.jsx)("h1",{children:"Products"})}),Object(a.jsx)(X.a,{className:"text-right",children:Object(a.jsxs)(K.a,{className:"my-3 bg-dark border-dark",onClick:function(){j(!0)},children:[Object(a.jsx)("i",{className:"fas fa-plus"})," Create product"]})})]}),(I||L||B)&&Object(a.jsx)(De,{}),(R||A||Q||F)&&Object(a.jsx)(Me,{variant:"danger",children:R||A||Q||F}),N&&Object(a.jsx)(Me,{variant:"success",children:"Product Deleted"}),q&&Object(a.jsx)(Me,{variant:"success",children:"Product Created"}),U&&Object(a.jsx)(Me,{variant:"success",children:"Product Updated"}),w&&Object(a.jsxs)(nt.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:"ID"}),Object(a.jsx)("td",{children:"Name"}),Object(a.jsx)("td",{children:"PRICE"}),Object(a.jsx)("td",{children:"CATEGORY"}),Object(a.jsx)("td",{children:"BRAND"}),Object(a.jsx)("td",{})]})}),Object(a.jsx)("tbody",{children:w.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:e._id}),Object(a.jsx)("td",{children:e.name}),Object(a.jsxs)("td",{children:["$",e.Price.toFixed(2)]}),Object(a.jsx)("td",{children:e.categroy}),Object(a.jsx)("td",{children:e.brand}),Object(a.jsxs)("td",{children:[Object(a.jsx)(K.a,{variant:"light",className:"btn-sm",onClick:function(){!function(e){k(e),g(!0)}(e)},children:Object(a.jsx)("i",{className:"fas fa-edit"})}),Object(a.jsx)(K.a,{variant:"danger",className:"btn-sm",onClick:function(){return z(e._id)},children:Object(a.jsx)("i",{className:"fas fa-trash"})})]})]},e._id)}))})]}),Object(a.jsx)(W.a,{className:"my-5 mx-1",children:_>1&&Object(a.jsxs)(ie.a,{children:[Object(a.jsx)(h.LinkContainer,{to:"/admin/products/page/".concat(T-1),children:Object(a.jsx)(ie.a.Prev,{disabled:1===T||!T})}),Object(re.a)(Array(_).keys()).map((function(e){return Object(a.jsx)(h.LinkContainer,{to:"/admin/products/page/".concat(e+1),children:e+1===i?Object(a.jsx)(ie.a.Item,{active:!0,children:e+1}):Object(a.jsx)(ie.a.Item,{children:e+1})})})),Object(a.jsx)(h.LinkContainer,{to:"/admin/products/page/".concat(T+1),children:Object(a.jsx)(ie.a.Next,{disabled:T===_})})]})})]})},Ut=function(e){var t=e.history,r=Object(p.c)((function(e){return e.adminOrders})),s=r.orders,i=r.loading,o=r.error,l=Object(p.c)((function(e){return e.user.user.isAdmin})),j=Object(p.c)((function(e){return e.adminDeliverOrder})),u=j.loading,b=j.error,h=Object(p.b)();Object(n.useEffect)((function(){l?u||h(function(){var e=Object(f.a)(m.a.mark((function e(t,r){var a,n,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:mt}),a=r().user.user.token,n={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},e.next=6,y.a.get("/api/orders",n);case 6:if(c=e.sent,(s=c.data).message){e.next=12;break}t({type:ft,payload:s}),e.next=13;break;case 12:throw new Error(s.message);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),t({type:gt,payload:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r){return e.apply(this,arguments)}}()):t.push("/login")}),[h,l,t,u]);var O=function(e){h(function(e){return function(){var t=Object(f.a)(m.a.mark((function t(r,a){var n,c,s,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:yt}),n=a().user.user.token,c={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},console.log(c),t.next=7,y.a.put("/api/order/".concat(e,"/deliver"),{},c);case 7:if(s=t.sent,(i={res:s}).message){t.next=13;break}r({type:vt,payload:i}),t.next=14;break;case 13:throw new Error(i.message);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),r({type:Et,payload:t.t0.message});case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e,r){return t.apply(this,arguments)}}()}(e))};return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("h1",{children:"Orders:"}),i||u?Object(a.jsx)(De,{}):o||b?Object(a.jsx)(Me,{variant:"danger",children:o||b}):s&&Object(a.jsxs)(nt.a,{bordered:!0,hover:!0,striped:!0,children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"id"}),Object(a.jsx)("th",{children:"user"}),Object(a.jsx)("th",{children:"date"}),Object(a.jsx)("th",{children:"total"}),Object(a.jsx)("th",{children:"paid"}),Object(a.jsx)("th",{children:"deliverd"}),Object(a.jsx)("th",{})]})}),Object(a.jsx)("tbody",{children:s.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:e._id}),Object(a.jsx)("th",{children:e.user.name}),Object(a.jsx)("th",{children:String(e.createdAt).substring(0,10)}),Object(a.jsx)("th",{children:e.totalPrice}),Object(a.jsx)("th",{children:e.isPaid?Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("i",{className:"fas fa-check",style:{color:"green"}}),"  "+e.paidAt.substring(0,10)]}):Object(a.jsx)("i",{className:"fas fa-times",style:{color:"darkred"}})}),Object(a.jsx)("th",{children:e.isDelivered?Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("i",{className:"fas fa-check",style:{color:"green"}}),"  "+e.deliveredAt.substring(0,10)]}):Object(a.jsx)("i",{className:"fas fa-times",style:{color:"darkred"}})}),Object(a.jsx)("th",{children:Object(a.jsx)(d.Link,{to:"/order/".concat(e._id),className:"btn bg-dark text-white",children:"Details"})}),Object(a.jsx)("th",{children:Object(a.jsx)(K.a,{className:"bg-dark border-dark",onClick:function(){return O(e._id)},disabled:e.isDelivered,children:"Mark as delivered"})})]},e._id)}))})]})]})},Ft=function(){return Object(a.jsxs)(d.BrowserRouter,{children:[Object(a.jsx)(ee,{}),Object(a.jsx)(o.a,{className:"py-3",children:Object(a.jsxs)("main",{children:[Object(a.jsx)(l.d,{exact:!0,path:"/",component:Qe}),Object(a.jsx)(l.d,{path:"/page/:numpage",component:Qe}),Object(a.jsx)(l.d,{exact:!0,path:"/search/:keyword",component:Qe}),Object(a.jsx)(l.d,{path:"/search/:keyword/page/:numpage",component:Qe}),Object(a.jsx)(l.d,{path:"/shipping",component:It}),Object(a.jsx)(l.d,{path:"/product/:id",component:He}),Object(a.jsx)(l.d,{path:"/cart/:id?",component:et}),Object(a.jsx)(l.d,{path:"/login",component:rt}),Object(a.jsx)(l.d,{path:"/register",component:at}),Object(a.jsx)(l.d,{path:"/profile",component:kt}),Object(a.jsx)(l.d,{path:"/payment",component:wt}),Object(a.jsx)(l.d,{path:"/placeorder",component:_t}),Object(a.jsx)(l.d,{path:"/order/:id",component:Rt}),Object(a.jsx)(l.d,{path:"/admin/users",component:Pt}),Object(a.jsx)(l.d,{exact:!0,path:"/admin/products",component:Dt}),Object(a.jsx)(l.d,{exact:!0,path:"/admin/products/page/:page",component:Dt}),Object(a.jsx)(l.d,{path:"/admin/user/:id/edit",component:Lt}),Object(a.jsx)(l.d,{path:"/admin/orders",component:Ut})]})}),Object(a.jsx)(te,{})]})},Mt=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,150)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),a(e),n(e),c(e),s(e)}))},Gt=(r(128),r(129),r(41)),Bt=r(90),qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:[],shippingAddress:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Je:var r=t.payload,a=e.cartItems.find((function(e){return e.product===r.product}));return a?Object(O.a)(Object(O.a)({},e),{},{cartItems:e.cartItems.map((function(e){return e.product===a.product?r:e}))}):Object(O.a)(Object(O.a)({},e),{},{cartItems:[].concat(Object(re.a)(e.cartItems),[r])});case We:return Object(O.a)(Object(O.a)({},e),{},{cartItems:e.cartItems.filter((function(e){return e.product!==t.payload}))});case Xe:return Object(O.a)(Object(O.a)({},e),{},{shippingAddress:t.payload});case Ke:return Object(O.a)(Object(O.a)({},e),{},{paymentMethod:t.payload});default:return e}},Qt=Object(Gt.c)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return Object(O.a)(Object(O.a)({},e),{},{loading:!0,products:[],error:null});case de:return Object(O.a)(Object(O.a)({},e),{},{loading:!1,products:t.payload.products,page:t.payload.page,pages:t.payload.pages,error:null});case le:return Object(O.a)(Object(O.a)({},e),{},{loading:!1,error:t.payload,products:null});default:return Object(O.a)({},e)}},details:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{reviews:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return Object(O.a)(Object(O.a)({},e),{},{loading:!0,product:{reviews:[]},error:null});case ue:return Object(O.a)(Object(O.a)({},e),{},{loading:!1,product:t.payload,error:null});case be:return Object(O.a)(Object(O.a)({},e),{},{loading:!1,error:t.payload,product:null});default:return Object(O.a)({},e)}},cart:qt,user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{},loading:null,err:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(O.a)(Object(O.a)({},e),{},{user:{},loading:!0,err:null});case E:return Object(O.a)(Object(O.a)({},e),{},{user:t.payload,loading:!1,err:null});case S:return Object(O.a)(Object(O.a)({},e),{},{user:{},loading:!1,err:t.payload});case k:return Object(O.a)(Object(O.a)({},e),{},{user:{},loading:!1,err:null});default:return e}},regUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{},loadng:null,err:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return{loading:!0,user:{},err:null};case I:return{loading:null,user:t.payload,err:null};case w:return{loading:null,user:{},err:t.payload};default:return Object(O.a)({},e)}},detailsUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{},loading:null,err:null,successUpdatedMessage:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(O.a)(Object(O.a)({},e),{},{loading:!0,user:{},err:null,successUpdatedMessage:null});case T:return Object(O.a)(Object(O.a)({},e),{},{loading:null,user:t.payload,err:null});case R:return Object(O.a)(Object(O.a)({},e),{},{loading:null,user:{},err:t.payload});case P:return Object(O.a)(Object(O.a)({},e),{},{loading:!0,err:null});case L:return Object(O.a)(Object(O.a)({},e),{},{loading:null,user:t.payload,err:null,successUpdatedMessage:"Updated successfully!"});case N:return Object(O.a)(Object(O.a)({},e),{},{loading:null,err:t.payload,successUpdatedMessage:null});default:return Object(O.a)({},e)}},orderCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ct:return{loading:!0};case st:return{loading:!1,success:!0,order:t.payload};case it:return{loading:!1,success:!1,err:t.payload};default:return e}},orderDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ot:return{loading:!0};case dt:return{loading:!1,success:!0,order:t.payload};case lt:return{loading:!1,order:{},success:!1,error:t.payload};default:return Object(O.a)({},e)}},orderPayment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case jt:return{loading:!0};case ut:return{loading:!1,success:!0};case bt:return{loading:!1,success:!1,error:t.payload};case ht:return{};default:return Object(O.a)({},e)}},myOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pt:return{loading:!0};case Ot:return{loading:!1,myorders:t.payload};case xt:return{loading:!1,error:t.payload};default:return Object(O.a)({},e)}},listUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return{loading:!0};case D:return{loading:!1,users:t.payload};case U:return{loading:!1,error:t.payload};case F:return{users:[]};default:return e}},deleteUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return{loading:!0};case G:return{loading:!1,success:!0};case B:return{loading:!1,error:t.payload};default:return e}},editUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return{loading:!0};case Q:return{loading:!1,user:t.payload};case $:return{loading:!1,error:t.payload};default:return e}},updateUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,error:null,user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return{loading:!0,user:{},error:null};case Y:return{loading:!1,user:t.payload,error:null};case V:return{loading:!1,error:t.payload,user:{}};default:return e}},productDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{reviews:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case he:return{loading:!0};case pe:return{loading:!1,success:!0};case Oe:return{loading:!1,error:t.payload};case xe:return{};default:return Object(O.a)({},e)}},productCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case me:return{loading:!0};case fe:return{loading:!1,success:!0};case ge:return{loading:!1,error:t.payload};case ye:return{};default:return Object(O.a)({},e)}},productEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return{loading:!0};case Ee:return{loading:!1,success:!0};case Se:return{loading:!1,error:t.payload};case ke:return{};default:return Object(O.a)({},e)}},adminOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mt:return{loading:!0};case ft:return{loading:!1,orders:t.payload};case gt:return{loading:!1,error:t.payload};default:return Object(O.a)({},e)}},adminDeliverOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case yt:return{loading:!0};case vt:return{loading:!1};case Et:return{loading:!1,error:t.payload};default:return Object(O.a)({},e)}},productReview:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ce:return{loading:!0};case Ie:return{loading:!1,success:!0};case we:return{loading:!1,error:t.payload};case _e:return{};default:return Object(O.a)({},e)}},topProducts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Te:return{loading:!0};case Re:return{loading:!1,products:t.payload};case Pe:return{loading:!1,error:t.payload};default:return Object(O.a)({},e)}}}),$t=localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[],zt=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):{},Yt={cart:{cartItems:$t,shippingAddress:localStorage.getItem("shippingAddress")?JSON.parse(localStorage.getItem("shippingAddress")):{},paymentMethod:localStorage.getItem("paymentMethod")?JSON.parse(localStorage.getItem("paymentMethod")):{}},user:{user:zt,err:null,loading:!1}},Vt=Object(Gt.e)(Qt,Yt,Object(Gt.d)(Object(Gt.a)(Bt.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));i.a.render(Object(a.jsx)(p.a,{store:Vt,children:Object(a.jsx)(Ft,{})}),document.getElementById("root")),Mt()}},[[130,1,2]]]);
//# sourceMappingURL=main.a966d250.chunk.js.map